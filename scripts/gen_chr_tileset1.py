import os

raw_hex = (
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "38 7c 7c 7c 38 00 38 00 00 00 00 00 00 00 00 00 "
    "6c 6c 48 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 6c fe 6c fe 6c 00 00 00 00 00 00 00 00 00 00 "
    "10 fe d0 fe 16 fe 10 00 00 00 00 00 00 00 00 00 "
    "00 ce dc 38 76 e6 00 00 00 00 00 00 00 00 00 00 "
    "00 38 6c 7c ec ee 7e 00 00 00 00 00 00 00 00 00 "
    "38 38 30 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "38 70 70 70 70 70 38 00 00 00 00 00 00 00 00 00 "
    "70 38 38 38 38 38 30 00 00 00 00 00 00 00 00 00 "
    "00 00 6c 38 6c 00 00 00 00 00 00 00 00 00 00 00 "
    "00 38 38 fe 38 38 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 30 30 60 00 00 00 00 00 00 00 00 "
    "00 00 00 7c 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 60 60 00 00 00 00 00 00 00 00 00 "
    "0e 1e 3c 78 f0 e0 00 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee ee ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 38 78 38 38 38 7c 00 00 00 00 00 00 00 00 00 "
    "00 7c 0e 7c e0 ee fe 00 00 00 00 00 00 00 00 00 "
    "00 fc 0e 3c 0e 0e fc 00 00 00 00 00 00 00 00 00 "
    "00 3e 7e ee ee fe 0e 00 00 00 00 00 00 00 00 00 "
    "00 fc e0 fc 0e ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 7c e0 fc ee ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 fe ee 1c 1c 38 38 00 00 00 00 00 00 00 00 00 "
    "00 7c ee 7c ee ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee 7e 0e 3c 00 00 00 00 00 00 00 00 00 "
    "00 60 60 00 00 60 60 00 00 00 00 00 00 00 00 00 "
    "00 60 60 00 00 60 60 c0 00 00 00 00 00 00 00 00 "
    "00 1c 38 70 70 38 1c 00 00 00 00 00 00 00 00 00 "
    "00 00 7c 00 00 7c 00 00 00 00 00 00 00 00 00 00 "
    "00 70 38 1c 1c 38 70 00 00 00 00 00 00 00 00 00 "
    "00 7c ee 1c 38 00 38 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee ee e0 7c 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee ee fe ee 00 00 00 00 00 00 00 00 00 "
    "00 fc ee fc ee ee fc 00 00 00 00 00 00 00 00 00 "
    "00 7c ee e0 e0 ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 f8 ec ee ee ee fc 00 00 00 00 00 00 00 00 00 "
    "00 fe e0 f0 e0 e0 fe 00 00 00 00 00 00 00 00 00 "
    "00 fe e0 f8 e0 e0 e0 00 00 00 00 00 00 00 00 00 "
    "00 7c e0 ee ee ee 7e 00 00 00 00 00 00 00 00 00 "
    "00 ee ee fe ee ee ee 00 00 00 00 00 00 00 00 00 "
    "00 7c 38 38 38 38 7c 00 00 00 00 00 00 00 00 00 "
    "00 0e 0e 0e 0e ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 ee fc f8 ec ee ee 00 00 00 00 00 00 00 00 00 "
    "00 e0 e0 e0 e0 ee fe 00 00 00 00 00 00 00 00 00 "
    "00 c6 ee fe fe ee ee 00 00 00 00 00 00 00 00 00 "
    "00 ce ee fe fe ee e6 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee ee ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 fc ee ee ee fc e0 00 00 00 00 00 00 00 00 00 "
    "00 7c ee ee ee ec 7e 00 00 00 00 00 00 00 00 00 "
    "00 fc ee ee ee fc ee 00 00 00 00 00 00 00 00 00 "
    "00 7c e0 7c 0e ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 fe 38 38 38 38 38 00 00 00 00 00 00 00 00 00 "
    "00 ee ee ee ee ee 7c 00 00 00 00 00 00 00 00 00 "
    "00 ee ee ee 6c 38 10 00 00 00 00 00 00 00 00 00 "
    "00 ee ee fe fe ee c6 00 00 00 00 00 00 00 00 00 "
    "00 ee 7c 38 7c ee ee 00 00 00 00 00 00 00 00 00 "
    "00 ee ee ee 7c 38 38 00 00 00 00 00 00 00 00 00 "
    "00 fe 1c 38 70 e0 fe 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "04 32 73 63 03 87 7e 3c 38 7c fc fc fc 78 00 00 "
    "fe 84 88 84 a2 d1 8a 04 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 60 70 78 7c 3e 3f 3f 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 7e ff ff 00 00 00 00 00 00 00 00 "
    "00 06 0e 1e 3e 7c fc fc 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "3f 1f 1c 18 39 39 39 3c 00 00 00 00 00 00 00 00 "
    "ff ff 7e 3c 3c 3c 3c 42 00 00 00 00 00 00 00 00 "
    "f8 f8 38 18 9c 9c 9c 3c 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "3f 3f 1f 1f 0f 07 00 00 00 00 00 00 00 00 00 00 "
    "c3 e7 ff db 3c ff ff 00 00 00 00 00 00 00 00 00 "
    "fc fc f8 f8 f0 e0 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "
    "00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"
)

data = bytearray(int(x, 16) for x in raw_hex.split())
# Pad to exactly 2048 bytes (128 tiles) if trailing zeros were trimmed
if len(data) < 2048:
    data.extend(b"\x00" * (2048 - len(data)))
assert len(data) == 2048, f"Got {len(data)}"

# Build 8KB CHR ROM: pad tileset to start at tile 0x20
chr_rom = bytearray(8192)
chr_rom[0x20 * 16 : 0x20 * 16 + 2048] = data

# Generate .s file
lines = ['.segment "CHARS"']
for i in range(0, len(chr_rom), 8):
    chunk = chr_rom[i:i + 8]
    hex_str = ",".join("$%02X" % b for b in chunk)
    lines.append(".byte " + hex_str)

output = "\n".join(lines) + "\n"

os.makedirs("samples/tileset1", exist_ok=True)
for path in ["samples/tileset1/chr_generic.s", "src/dotnes.tests/Data/chr_tileset1.s"]:
    with open(path, "w", newline="\n") as f:
        f.write(output)
    print("Wrote " + path)

print(f"CHR ROM: {len(chr_rom)} bytes, {len(lines) - 1} .byte lines")
